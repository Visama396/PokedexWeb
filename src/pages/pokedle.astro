---
import Layout from "../layouts/Layout.astro";
import Pokemondle from "../components/Pokemondle";
import TopBar from "../components/TopBar.astro";
import { translate, translateWithWords } from "../utils/translate";
import { getYesterdaysPokemon } from "../utils/getPokemonId";
import { capitalize } from "../utils/capitalize";

const yesterdayPokemon = await fetch(`https://pokeapi.co/api/v2/pokemon/${getYesterdaysPokemon()}`)
	.then(response => response.json())
	.then(data => data.name);

---
<Layout title="Visamadex Â· Pokedle" language="es">
	<div class="flex flex-col min-h-screen">
		<TopBar />
		<header class="p-2 mb-4">
			<h1 class="font-black text-3xl md:text-6xl text-center text-white mb-2">Pokedle</h1>
			<h2 class="font-medium text-md md:text-xl text-center text-gray-500">{translate('pokedleDescription', 'es')}</h2>
			<h3 class="font-medium text-lg md:text-2xl text-center text-gray-300">{translateWithWords('yesterdayPokemon', [capitalize(yesterdayPokemon)], 'es')}</h3>
		</header>
		<Pokemondle daily={true} language='es' client:load />
		<footer class="p-4 text-gray-600">
			<p>{translate('footer', 'es')}</p>
		</footer>
	</div>
</Layout>
